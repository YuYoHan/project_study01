<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!--    /oauth2/authorization/google 이거는 내마음대로 바꾸는 것이 아니라 고정이다.
        google api 센터에서 리디렉션 URI를 고정으로 쓰는 것처럼 말이다.
        ex) http://localhost:8080/login/oauth2/code/google -->
<a href="/oauth2/authorization/google">구글 로그인</a>
<!-- 이걸 클릭하면 https://nid.naver.com/oauth2.0/authorize 여기로 보내짐-->
<a href="/oauth2/authorization/naver">네이버 로그인</a>
<form id="memberForm">
    <label for="nickName">별명:</label>
    <input type="text" id="nickName" name="nickName" required>

    <label for="userAddr">주소:</label>
    <input type="text" id="userAddr" name="userAddr" required>

    <label for="userAddrDetail">상세 주소:</label>
    <input type="text" id="userAddrDetail" name="userAddrDetail" required>

    <label for="userAddrEtc">기타 주소:</label>
    <input type="text" id="userAddrEtc" name="userAddrEtc" required>

    <button type="button" onclick="submitForm()">제출</button>
</form>
<script>
    function submitForm() {
        // 입력된 값을 가져옵니다.
        const nickName = document.getElementById('nickName').value;
        const userAddr = document.getElementById('userAddr').value;
        const userAddrDetail = document.getElementById('userAddrDetail').value;
        const userAddrEtc = document.getElementById('userAddrEtc').value;

        // 주소 관련 정보를 JSON으로 묶습니다.
        const addressDTO = {
            userAddr: userAddr,
            userAddrDetail: userAddrDetail,
            userAddrEtc: userAddrEtc,
        };

        // 멤버 관련 정보를 JSON으로 묶습니다.
        const memberDTO = {
            nickName: nickName,
            addressDTO: addressDTO,
        };

        // AJAX를 사용하여 데이터를 JSON 형식으로 서버에 보냅니다.
        fetch('http://localhost:8080/success-oauth-login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(memberDTO),
        })
            .then((response) => response.json())
            .then((data) => {
                // 서버로부터의 응답을 처리합니다 (필요하면).
                console.log(data);
            })
            .catch((error) => {
                console.error('오류:', error);
            });
    }
</script>

</body>
</html>